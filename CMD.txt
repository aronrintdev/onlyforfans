%%% Demo site
$ php artisan serve
$ npm run hot

# Main Laravel server
$ php artisan serve 

# Laravel queue worker
$ php artisan queue:work 

# Laravel Websockets server
$ php artisan websocket:serve 

# webpack service
$ npm run hot 
  ...or...
$ npm run watch 

------------------------

%%% Need to unzip js dist folder (!)
$ pushd public/js
$ unzip dist.zip

%%% Need to pull down vendor/stripe folder (??)
$ scp mjmfans:/home/fansplatformmjmd/fan/vendor-stripe.tgz .
$ tar xvzf vendor-stripe.tgz

%%% Composer
COMPOSER_MEMORY_LIMIT=-1 composer require ramsey/uuid
COMPOSER_MEMORY_LIMIT=-1 composer update

%%% Migrations
php artisan make:migration create_shareditems --create="shareditems"
php artisan migrate --env=testing
php artisan migrate:rollback --step=1

%%% Testing
$ vendor/bin/phpunit --group mfdev
$ vendor/bin/phpunit  -d memory_limit=-1 --testdox --group devcomment 
$ echo "" > storage/logs/laravel.log; vendor/bin/phpunit  -d memory_limit=-1 --testdox  --group this
$ echo "" > storage/logs/laravel.log; php -n vendor/bin/phpunit  -d memory_limit=-1 --testdox  --group regression
$ echo "" > storage/logs/laravel.log; php -n -dextension=intl.so vendor/bin/phpunit  -d memory_limit=-1 --testdox  --group regression

$ php artisan test  --group regression
$ php -n artisan test  --group regression

# stress testing...
$ for i in {1..10}; do php -n vendor/bin/phpunit --testdox  --group here; done

%%%
cp app/Patches/ThemeServiceProvider.php vendor/teepluss/theme/src/ThemeServiceProvider.php

# https://stackoverflow.com/questions/56605551/laravel-5-8-env-testing-file-is-not-working
$ php artisan config:cache --env=testing
$ php artisan config:cache --env=local

%%%
$ php artisan truncate:data
$ php artisan db:seed --class=UsernameRulesTableSeeder
$ php artisan db:seed --class=RolesTableSeeder
$ php artisan db:seed --class=UsersTableSeeder
$ php artisan db:seed --class=StoriesTableSeeder
$ php artisan db:seed --class=PostsTableSeeder
$ php artisan db:seed --class=ShareablesTableSeeder

# Run all seeds in test env (.env.testing)
$ php artisan db:seed --class=TestDatabaseSeeder

# Run all seeds in dev/staging/demo env (eg localhost, .env)
$ php artisan db:seed --class=DatabaseSeeder

%%% Tinker
$ php artisan tinker
>>> error_reporting(E_ALL & ~E_NOTICE & ~E_STRICT & ~E_DEPRECATED)

%%%
ref: https://bitbucket.org/mjmdesign/fans-platform/pull-requests/19
$ php artisan websocket:serve

%%%
find app resources/views resources/assets \( -name "*.php" -o -name "*.vue" \) | xargs grep stories

mvim A-HERE.txt routes/web.php tests app/Http/Controllers resources/views resources/assets/js/

%%% cron/queue scripts
$ php artisan setmf:basenames
$ php artisan make:thumbs 300
$ php artisan make:blurs 300

----
mysqldump to backup both main & financial database

delete tables in main database
delete tablesi in financial database

php artisan migrate

